# 3D长方体交互应用（本地化版本）

## 📋 项目简介

这是一个基于 Three.js 的 3D 长方体交互应用，**所有资源已完全本地化**，无需联网即可快速加载和运行。

### ✨ 主要功能

- **尺寸调节**：自定义长方体的长、宽、高（1-20单位）
- **操作模式**：
  - 🔄 **旋转模式**：拖动空白区域旋转视角
  - ✋ **拖动模式**：点击并拖动小立方体改变位置
  - 🎨 **涂色模式**：点击小立方体的面进行单面或整面涂色
- **颜色选择**：5种预设颜色（红、黄、绿、蓝、白）
- **操作撤销**：支持撤销最近的操作（最多20步）
- **一键归位**：将所有移位的小立方体恢复到原始位置
- **响应式设计**：支持桌面端和移动端，适配各种屏幕尺寸

## 📁 文件结构

```
3D-Cuboid-App/
├── index.html                 # 主页面（已本地化所有资源 + PWA 支持）
├── manifest.json              # PWA 配置文件
├── sw.js                      # Service Worker（离线缓存）
├── css/
│   └── all.min.css           # Font Awesome 图标样式
├── js/
│   ├── three.min.js          # Three.js 核心库 (612 KB)
│   └── OrbitControls.min.js  # Three.js 轨道控制器 (26 KB)
├── webfonts/                 # Font Awesome 字体文件
│   ├── fa-solid-900.woff2    # Solid 图标字体 (150 KB)
│   ├── fa-regular-400.woff2  # Regular 图标字体 (25 KB)
│   └── fa-brands-400.woff2   # Brands 图标字体 (108 KB)
├── icons/                    # PWA 应用图标
│   ├── icon.svg              # SVG 源文件
│   └── README-ICONS.md       # 图标生成说明
├── 3D长方体2.html            # 原始文件（保留作为参考）
├── README.md                 # 项目说明文档
└── PWA-安装指南.md           # PWA 安装详细教程
```

## 🚀 使用方法

### 方法一：电脑端直接打开

1. 解压文件夹到任意位置
2. 双击打开 `index.html` 文件
3. 无需联网，即可在浏览器中使用

### 方法二：安装为 APP（推荐）⭐⭐⭐

**支持 PWA，可以像原生 APP 一样使用！**

#### 在安卓平板/手机上：
1. 将整个文件夹复制到设备
2. 用 Chrome/Edge 浏览器打开 `index.html`
3. 点击"安装"或"添加到主屏幕"
4. 完成！就像真正的 APP 一样

**详细教程请查看：[PWA-安装指南.md](PWA-安装指南.md)**

#### 在电脑上：
1. 用 Chrome/Edge 打开 `index.html`
2. 地址栏右侧会显示"安装"图标
3. 点击安装即可

### 方法三：本地服务器

如果需要通过本地服务器访问（可选）：

```bash
# 使用 Python 3
python -m http.server 8000

# 使用 Node.js (需要安装 http-server)
npx http-server -p 8000
```

然后在浏览器中访问：`http://localhost:8000`

## 🎯 操作指南

### 基本操作

1. **调整尺寸**：使用左侧面板的 +/- 按钮或直接输入数值
2. **选择颜色**：点击颜色方块选择当前颜色
3. **切换模式**：点击对应的模式按钮
4. **更新立方体**：修改尺寸后点击"更新立方体"按钮

### 三种操作模式

#### 🔄 旋转模式（默认）
- 在空白区域拖动鼠标可旋转视角
- 滚动鼠标滚轮可缩放
- 右键拖动可平移视图

#### ✋拖动模式
- 点击并拖动小立方体
- 松开鼠标后，立方体会自动吸附到最近的网格位置
- 被移动的立方体会被标记为"已移位"

#### 🎨 涂色模式
- **单面涂色**：点击小立方体的某个面，只涂色该面
- **整面涂色**：启用"整面涂色"后，点击某个外侧面，会将整个侧面涂成相同颜色

### 快捷键

- **Ctrl+Z / Cmd+Z**：撤销上一步操作
- **Esc**：关闭移动端菜单（移动设备）

## 🔧 优化说明

### 相比原版的改进

1. **✅ 完全本地化**
   - 移除了 Google Fonts（在中国访问慢）
   - 使用系统默认中文字体（微软雅黑、苹果苹方等）
   - 所有 CDN 资源已下载到本地

2. **⚡ 加载速度提升**
   - 原版需要加载多个外部资源，在中国可能需要 10+ 秒
   - 本地化版本加载时间 < 1 秒

3. **📦 离线可用**
   - 无需网络连接即可使用
   - 适合在没有网络或网络不稳定的环境中使用

4. **📱 PWA 支持（新增）**
   - 可以安装到设备主屏幕
   - 像原生 APP 一样使用
   - Service Worker 智能缓存
   - 全屏体验，无浏览器界面

## 💡 技术栈

- **Three.js 0.132.2**：3D 图形渲染
- **OrbitControls**：相机轨道控制
- **Font Awesome 6.4.0**：图标库
- **原生 JavaScript**：无需额外框架
- **CSS3**：现代化样式和动画

## 📱 兼容性

- ✅ Chrome / Edge（推荐）
- ✅ Firefox
- ✅ Safari
- ✅ 移动端浏览器（iOS Safari、Android Chrome）
- ⚠️ 需要浏览器支持 WebGL

## 📏 文件大小

- **总大小**：约 1.1 MB
- **Three.js**：612 KB
- **Font Awesome**：约 400 KB（CSS + 字体文件）
- **HTML**：78 KB

## 🎓 教学用途

此应用非常适合用于：
- 小学数学立体几何教学
- 展示长方体的组成和特性
- 培养学生的空间想象能力
- 交互式课堂演示

## ⚠️ 注意事项

1. **浏览器要求**：需要支持 WebGL 的现代浏览器
2. **性能建议**：建议尺寸不超过 15×15×15，过大会影响性能
3. **文件完整性**：请确保所有文件夹和文件完整，不要删除任何文件

## 📞 常见问题

### Q: 打开后页面空白或报错？
A: 请确保：
- 使用现代浏览器（Chrome、Edge、Firefox、Safari）
- 文件夹结构完整，所有文件都在
- 浏览器已启用 JavaScript

### Q: 图标显示为方框？
A: 请确保 `webfonts` 文件夹和 `css/all.min.css` 文件存在且路径正确

### Q: 可以修改颜色吗？
A: 可以！在 `index.html` 文件中搜索 `.color-picker`，修改 `data-color` 和 `background-color` 属性

## 📝 更新日志

### v2.0（PWA 版本）- 2025-10-22
- ✅ **新增 PWA 支持** - 可安装为 APP
- ✅ **Service Worker** - 智能离线缓存
- ✅ 所有外部资源本地化
- ✅ 移除 Google Fonts 依赖
- ✅ 优化字体回退方案
- ✅ 提升加载速度 10 倍以上
- ✅ 修复图标显示问题

### v1.0（原始版本）
- 基础 3D 长方体功能
- 三种操作模式
- 颜色选择和撤销功能

## 📄 许可证

本项目基于原始 3D 长方体应用优化而来，仅供学习和教学使用。

---

**制作日期**：2025年10月22日  
**优化目标**：提升在中国地区的加载速度和离线可用性
